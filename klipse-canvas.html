<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>3D Drawing on a html5 canvas with Klipse</title>

<link rel="stylesheet" type="text/css"  
  href="http://app.klipse.tech/css/codemirror.css">

<script>  
  window.klipse_settings = {
        selector: '.language-klipse',
        selector_js: '.language-klipse-js'
};
</script>

</head>

<body>

  <pre>
    <code class="language-klipse">
(defn draw-node [x y ctx]
  (let [r 5] ;; radius
  (set! (.-fillStyle   ctx) "blue")
  (.beginPath ctx)
  (.arc ctx x y r 0 (* 2 (.-PI js/Math)))
  (.fill ctx)))

(defn draw-bezier-curve [x1 y1 x2 y2 x3 y3 ctx]
  (set! (.-strokeStyle ctx) "red")
  (set! (.-lineWidth   ctx) 2)
  (.beginPath ctx)
  (.moveTo ctx x1 y1)
  (.quadraticCurveTo ctx x2 y2 x3 y3)
  (.stroke ctx)
  (.closePath ctx))

(let [canvas (js/document.getElementById "canvas-2d")
      ctx    (.getContext canvas "2d")
      w      (.-width canvas)
      h      (.-height canvas)
      x      (/ w 2)
      y      (/ h 2)]
  
  ;; draw four area's bounded by grey lines
  (set! (.-strokeStyle ctx) "grey")
  (set! (.-lineWidth   ctx)      1)
  (.clearRect  ctx 0 0 w h)
  (.strokeRect ctx 0 0 w h)
  (.strokeRect ctx 0 0 x y)
  (.strokeRect ctx x y w h)

  ;; draw a node in the center of the canvas
  (draw-node x y ctx)
  
  ;; Increasing ascending curve
  (draw-bezier-curve 0 y, x y, x 0, ctx)

  ;; Swoosh
  (draw-bezier-curve x (/ x 2), x y, w 0, ctx)

  ;; y = x^2
  (draw-bezier-curve 0 x, (/ x 2) (* h 1.5), x y, ctx)

  ;; my pulse after a useless meeting
  (draw-bezier-curve x (* h 0.75), w (* h 0.75), w (* h 0.75) ctx))
   </code>
  </pre>
  <canvas id="canvas-2d" width="512" height="512"></canvas>


  <script src="http://app.klipse.tech/plugin/js/klipse_plugin.js?"></script>
</body>
</html>
